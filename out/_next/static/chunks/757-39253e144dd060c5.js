"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{35749:(e,t,r)=>{r.d(t,{A:()=>N});var a=r(95155),s=r(12115),l=r(69598);let n=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var i=r(70957),d=r(55628);let c=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});function o(e){let{content:t,className:r=""}=e;if(!t)return null;let l=s.useMemo(()=>{let e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),r=[];e=e.replace(/```([\s\S]*?)```/g,(e,t)=>{let a="__CODE_BLOCK_".concat(r.length,"__"),s=t.trim().split("\n")[0],l=s&&!s.includes(" ")&&s.length<20,n="",i=t;l&&(n=s,i=t.substring(s.length).trim());let d=n?'<div class="text-xs text-gray-500 mb-0.5">'.concat(n,"</div>"):"";return r.push('<div class="relative">\n          '.concat(d,'\n          <pre class="bg-gray-800 text-gray-100 p-2 rounded-md my-2 overflow-x-auto font-mono text-sm">\n            <code>').concat(i,"</code>\n          </pre>\n        </div>")),a});let a=[];e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/`([^`]+)`/g,(e,t)=>{let r="__INLINE_CODE_".concat(a.length,"__");return a.push('<code class="font-mono bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm">'.concat(t,"</code>")),r})).replace(/^##### (.*$)/gm,'<h5 class="text-sm font-bold mt-2 mb-1">$1</h5>')).replace(/^#### (.*$)/gm,'<h4 class="text-base font-bold mt-2 mb-1">$1</h4>')).replace(/^### (.*$)/gm,'<h3 class="text-lg font-bold mt-3 mb-1">$1</h3>')).replace(/^## (.*$)/gm,'<h2 class="text-xl font-bold mt-3 mb-2">$1</h2>')).replace(/^# (.*$)/gm,'<h1 class="text-2xl font-bold mt-3 mb-2">$1</h1>')).replace(/^\s*\-{3,}\s*$/gm,'<hr class="my-3 border-t border-gray-300 dark:border-gray-700" />')).replace(/^\s*>\s*(.*)$/gm,'<blockquote class="border-l-2 border-gray-300 dark:border-gray-600 pl-2 py-0.5 my-2 text-gray-700 dark:text-gray-300">$1</blockquote>')).replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>")).replace(/\_\_([^_]+)\_\_/g,"<strong>$1</strong>")).replace(/\*([^*]+)\*/g,"<em>$1</em>")).replace(/\_([^_]+)\_/g,"<em>$1</em>")).replace(/^\s*[\*\-]\s+(.*)$/gm,"<li>$1</li>");let s=!1,l=e.split("\n");for(let e=0;e<l.length;e++)l[e].startsWith("<li>")?s||(l[e]='<ul class="list-disc pl-4 my-2 space-y-0.5">'+l[e],s=!0):s&&(l[e-1]=l[e-1]+"</ul>",s=!1);return s&&(l[l.length-1]=l[l.length-1]+"</ul>"),e=(e=(e=(e=l.join("\n")).replace(/^\s*(\d+)\.\s+(.*)$/gm,'<li class="ml-1">$2</li>')).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank" rel="noopener noreferrer">$1</a>')).replace(/\n/g,"<br/>"),r.forEach((t,r)=>{e=e.replace("__CODE_BLOCK_".concat(r,"__"),t)}),a.forEach((t,r)=>{e=e.replace("__INLINE_CODE_".concat(r,"__"),t)}),e},[t]);return(0,a.jsx)("div",{className:"markdown-content ".concat(r),dangerouslySetInnerHTML:{__html:l}})}function m(e){let t,{message:r}=e,s="user"===r.role,l="error"===r.status,{currentConversation:n}=(0,i.Y)();return(0,a.jsx)("div",{className:"flex w-full mb-4 animate-fade-in ".concat(s?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[85%] md:max-w-[75%] rounded-lg px-4 py-3 ".concat(s?"bg-primary text-black rounded-tr-none":l?"bg-amber-50 dark:bg-amber-900/30 text-gray-900 dark:text-gray-100 rounded-tl-none border border-amber-200 dark:border-amber-800":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-tl-none"),children:(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[l&&(0,a.jsxs)("div",{className:"flex items-center mb-2 text-amber-600 dark:text-amber-400",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Notice"})]}),s?(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words",children:r.content}):(0,a.jsx)(o,{content:r.content,className:s?"text-black":l?"text-gray-900 dark:text-amber-100":"text-gray-900 dark:text-gray-100"}),r.attachments&&r.attachments.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"text-xs mb-1",children:"Attachments:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.attachments.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center bg-white dark:bg-gray-900 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:[(0,a.jsx)(c,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"truncate max-w-[120px]",children:e})]},t))})]}),(0,a.jsx)("div",{className:"text-xs mt-1 ".concat(s?"text-gray-600 text-right":l?"text-amber-600 dark:text-amber-400":"text-gray-500 dark:text-gray-400"),children:(t=r.timestamp,new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t))})]})})})}var x=r(74500);let g=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}),h=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});var u=r(28019);function y(e){let{onSendMessage:t,isLoading:r}=e,[l,n]=(0,s.useState)(""),[i,d]=(0,s.useState)([]),[c,o]=(0,s.useState)(!1),m=(0,s.useRef)(null),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e;return c&&(e=setTimeout(()=>{o(!1)},1500)),()=>clearTimeout(e)},[c]);let b=e=>{e.preventDefault(),(l.trim()||i.length>0)&&(t(l,i),n(""),d([]),o(!0),y.current&&(y.current.style.height="auto"))},p=e=>{d(i.filter((t,r)=>r!==e))},f=""===l.trim()&&0===i.length,v=!f||c||r;return(0,a.jsxs)("div",{className:"w-full mx-auto border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 shadow-lg",children:[i.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 px-4 pt-3 mb-1",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-sm text-gray-800 dark:text-gray-200",children:[(0,a.jsx)("span",{className:"truncate max-w-[150px]",children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>p(t),className:"ml-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]},t))}),(0,a.jsxs)("form",{onSubmit:b,className:"relative max-w-3xl mx-auto px-4 py-3",children:[(0,a.jsx)("textarea",{ref:y,value:l,onChange:e=>{n(e.target.value),y.current&&(y.current.style.height="auto",y.current.style.height="".concat(Math.min(y.current.scrollHeight,150),"px"))},placeholder:"Message Buan AI...",rows:1,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 p-3 pr-24 sm:pr-24 text-gray-900 dark:text-gray-100 resize-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent shadow-sm min-h-[50px] max-h-[150px]",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(e))}}),(0,a.jsxs)("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex items-center space-x-2",children:[(0,a.jsx)("button",{type:"button",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},children:(0,a.jsx)(g,{className:"h-5 w-5"})}),v?(0,a.jsx)("button",{type:"submit",disabled:f&&!c&&!r,className:"p-1.5 rounded-md transition-opacity duration-200 ".concat(r?"bg-primary/90 hover:bg-primary-light/90 text-white":f&&c?"bg-primary/70 hover:bg-primary-light/70 text-white":"bg-primary hover:bg-primary-light text-white"),children:r?(0,a.jsx)("div",{className:"h-5 w-5 rounded-full animate-spin border-2 border-solid border-current border-t-transparent"}):(0,a.jsx)(h,{className:"h-5 w-5"})}):(0,a.jsx)(u.A,{onTextReceived:e=>{var t;n(t=>{let r=t+(t.length>0&&!t.endsWith(" ")?" ":"")+e;return setTimeout(()=>{y.current&&(y.current.style.height="auto",y.current.style.height="".concat(Math.min(y.current.scrollHeight,150),"px"))},0),r}),null===(t=y.current)||void 0===t||t.focus()},variant:"ghost",size:"sm"}),(0,a.jsx)("input",{type:"file",ref:m,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files).map(e=>e.name);d(e=>[...e,...t])}},className:"hidden",multiple:!0})]})]}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 pb-2",children:"Shift + Enter for new line | Enter to send"})]})}let b=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))});var p=r(31151),f=r(42331);function v(e){let{conversations:t,currentConversationId:r,onSelectConversation:s,onNewConversation:l,onDeleteConversation:i,onClose:d,userRole:c}=e,o=e=>{let t=new Date,r=new Date(t);return(r.setDate(r.getDate()-1),e.toDateString()===t.toDateString())?"Today":e.toDateString()===r.toDateString()?"Yesterday":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e)},m=t.filter(e=>e.userRole===c);return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-zinc-800 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"font-medium text-gray-900 dark:text-white",children:"Conversations"}),(0,a.jsx)("button",{className:"lg:hidden p-1 rounded-md text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:d,children:(0,a.jsx)(x.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(f.A,{fullWidth:!0,onClick:l,icon:(0,a.jsx)(n,{className:"h-5 w-5"}),children:"New Conversation"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===m.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center",children:[(0,a.jsx)(b,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No conversations yet. Start a new one!"})]}):(0,a.jsx)("div",{className:"space-y-1 p-2",children:m.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 \n                  ".concat(r===e.id?"bg-gray-200 dark:bg-gray-700":""),onClick:()=>{s(e.id),d&&d()},children:[(0,a.jsxs)("div",{className:"truncate flex-1 mr-2",children:[(0,a.jsx)("p",{className:"truncate text-sm font-medium text-gray-900 dark:text-gray-100",children:e.title}),(0,a.jsxs)("p",{className:"truncate text-xs text-gray-500 dark:text-gray-400",children:[o(e.lastUpdated)," â€¢ ","student"===e.userRole?"AI Tutor":"Teaching Assistant"]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},e.id))})})]})}let j=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))});function k(e){let{title:t,suggestions:r,onSuggestionClick:s}=e;return(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"bg-primary/10 dark:bg-primary/20 p-2 rounded-full mr-3",children:(0,a.jsx)(j,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t})]}),(0,a.jsx)("div",{className:"grid gap-2 mt-4",children:r.map((e,t)=>(0,a.jsx)("button",{className:"text-left p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors text-gray-700 dark:text-gray-200",onClick:()=>s(e),children:e},t))})]})}function w(){let[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=setInterval(()=>{t(e=>(e+1)%4)},500);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"flex items-start mb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-3",children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center text-white",children:"AI"})}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-3 max-w-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Thinking"}),(0,a.jsx)("span",{className:"w-8 text-gray-600 dark:text-gray-300 text-sm",children:".".repeat(e)}),(0,a.jsxs)("div",{className:"ml-2 flex space-x-1",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-pulse",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-pulse",style:{animationDelay:"300ms"}}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-pulse",style:{animationDelay:"600ms"}})]})]})})]})}function N(e){let{userRole:t}=e,{conversations:r,currentConversation:d,isLoading:c,createNewConversation:o,setCurrentConversationById:x,addMessage:g,deleteConversation:h,isOffline:u,suggestedPrompts:b}=(0,i.Y)(),[p,f]=(0,s.useState)(!1),[j,N]=(0,s.useState)(2),C=(0,s.useRef)(null);(0,s.useEffect)(()=>{C.current&&C.current.scrollIntoView({behavior:"smooth"})},[null==d?void 0:d.messages,c]),(0,s.useEffect)(()=>{if(r.length>0&&!d&&t){let e=r.filter(e=>e.userRole===t);e.length>0?x(e[0].id):o(t)}else!d&&t&&o(t)},[r,d,o,x,t]);let _=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d?g(e,r,j):(o(t),setTimeout(()=>{g(e,r,j)},0))},E=()=>{o(t),f(!1)},L={1:"Gentle",2:"Balanced",3:"Strict"}[j];return(0,a.jsxs)("div",{className:"relative h-full flex flex-col lg:flex-row",children:[p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:()=>f(!1)}),(0,a.jsx)("div",{className:"fixed inset-y-0 left-0 z-30 w-72 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 lg:w-80 lg:flex-shrink-0 ".concat(p?"translate-x-0":"-translate-x-full"),children:(0,a.jsx)(v,{conversations:r,currentConversationId:(null==d?void 0:d.id)||null,onSelectConversation:x,onNewConversation:E,onDeleteConversation:h,onClose:()=>f(!1),userRole:t})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>f(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 mr-2",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white hidden md:block",children:(null==d?void 0:d.title)||("student"===t?"Buan AI Tutor":"Buan AI Teaching Assistant")})]}),(0,a.jsxs)("button",{onClick:E,className:"inline-flex items-center text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary text-sm gap-1.5 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,a.jsx)(n,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"New chat"})]})]}),"student"===t&&(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-zinc-800",children:[(0,a.jsxs)("label",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"Socratic Mode"}),(0,a.jsx)("span",{className:"text-sm text-primary font-semibold",children:L})]}),(0,a.jsx)("input",{type:"range",min:1,max:3,value:j,onChange:e=>N(Number(e.target.value)),className:" w-full h-2 rounded-lg appearance-none cursor-pointer bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 accent-primary "}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-1 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:"Gentle"}),(0,a.jsx)("span",{children:"Balanced"}),(0,a.jsx)("span",{children:"Strict"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-zinc-900 p-4 pb-36",children:d&&d.messages.length>0?(0,a.jsxs)(a.Fragment,{children:[d.messages.map(e=>(0,a.jsx)(m,{message:e},e.id)),c&&(0,a.jsx)(w,{}),(0,a.jsx)("div",{ref:C})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"max-w-md w-full px-4",children:(0,a.jsx)(k,{title:"student"===t?"What would you like to learn today?":"How can I help with your teaching?",suggestions:b,onSuggestionClick:e=>{_(e)}})})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0",children:(0,a.jsx)(y,{onSendMessage:_,isLoading:c})})]})]})}},96209:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(95155),s=r(12115),l=r(35695),n=r(23475);function i(e){let{children:t,roleRequired:r,allowGuest:i=!0,requireEmailConfirmation:d=!0}=e,c=(0,l.useRouter)(),{user:o,isLoading:m,isAuthenticated:x,isEmailConfirmed:g,isGuest:h}=(0,n.A)();return((0,s.useEffect)(()=>{if(!m&&!x){c.push("/login");return}if(!m&&h){if(!i){c.push("/signup");return}}else if(!m&&x&&!h){if(d&&!g){c.push("/login");return}r&&(null==o?void 0:o.role)!==r&&((null==o?void 0:o.role)==="student"?c.push("/tutor"):(null==o?void 0:o.role)==="teacher"?c.push("/teaching-assistant"):c.push("/"))}},[m,o,c,r,x,g,h,i,d]),m)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):x?!d||g||h?h&&!i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-6 bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Account Required"}),(0,a.jsx)("p",{className:"mb-4",children:"This section requires a registered account. Please sign up to continue."}),(0,a.jsx)("button",{onClick:()=>c.push("/signup"),className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark",children:"Create Account"})]})}):r&&(null==o?void 0:o.role)!==r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-lg font-semibold",children:"Redirecting to the appropriate page for your role..."})})}):(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-6 bg-white dark:bg-zinc-800 rounded-xl shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Email Confirmation Required"}),(0,a.jsx)("p",{className:"mb-4",children:"Please check your email and confirm your account before accessing this page."}),(0,a.jsx)("button",{onClick:()=>c.push("/login"),className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark",children:"Back to Login"})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-lg font-semibold",children:"Redirecting to login..."})})})}}}]);